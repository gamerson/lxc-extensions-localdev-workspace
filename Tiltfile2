k8s_yaml(local("ytt -f k8s/dxp_proxy"))

# Extensions

# able-theme-css
custom_build(
  'able-theme-css',
  "extensions/able-theme-css/build.sh",
  deps=[
    'extensions/able-theme-css/build.gradle',
    'extensions/able-theme-css/client-extension.yaml',
    'extensions/able-theme-css/package.json',
    'extensions/able-theme-css/src'
  ],
  ignore=[]
)

k8s_yaml(local("extensions/able-theme-css/yaml.sh"))

watch_file("extensions/able-theme-css/client-extension.yaml")
watch_file("extensions/able-theme-css/yaml.sh")

k8s_resource(
  labels=['extensions'],
  resource_deps=[],
  objects=[
    'able-theme-css-liferay.com-lxc-ext-provision-metadata:configmap',
    'able-theme-css:ingress',
    'able-theme-css:ingressroute'
  ],
  workload='able-theme-css'
)